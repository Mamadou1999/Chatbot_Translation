<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Document for Translation</title>
    <script>
        function addLanguageToFormURL() {
            // Récupérer la langue depuis l'URL du site externe
            const urlParams = new URLSearchParams(window.location.search);
            const lang = urlParams.get('lang');
            
            // Ajouter la langue à l'URL d'action du formulaire
            if (lang) {
                const form = document.getElementById('upload-form');
                const currentAction = form.action;
                form.action = `${currentAction}?lang=${lang}`;
            }
        }
    </script>
</head>
<body onload="addLanguageToFormURL()">
    <h1>Upload your document for translation</h1>
    <form id="upload-form" enctype="multipart/form-data" method="POST" action="https://us-central1-poc-gen-ai-432316.cloudfunctions.net/document_translation?lang=fr">
        <input type="file" name="document" accept=".pdf,.docx,.txt" required>
        <button type="submit">Upload</button>
    </form>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Document for Translation</title>
    <script>
        function addLanguageToFormURL() {
            // Récupérer la langue depuis l'URL du site externe
            const urlParams = new URLSearchParams(window.location.search);
            const decodedUrl = decodeURIComponent(urlParams);
            // Créer un objet URLSearchParams à partir de la chaîne décodée
            const params = new URLSearchParams(decodedUrl.split('?')[1]);

            // Extraire la valeur associée à 'lang'
            const lang = params.get('lang');
            // alert(lang)
            
            // Ajouter dynamiquement la langue à l'URL d'action du formulaire
            if (lang) {
                const form = document.getElementById('upload-form');
                let currentAction = form.action;

                // Vérifiez s'il y a déjà des paramètres dans l'URL
                if (currentAction.includes('?')) {
                    currentAction += `&lang=${lang}`;
                } else {
                    currentAction += `?lang=${lang}`;
                }

                form.action = currentAction;
            }
        }
    </script>
</head>
<body onload="addLanguageToFormURL()">
    <h1>Upload your document for translation</h1>
    <form id="upload-form" enctype="multipart/form-data" method="POST" action="https://us-central1-poc-gen-ai-432316.cloudfunctions.net/document_translation">
        <input type="file" name="document" accept=".pdf,.docx,.txt" required>
        <button type="submit">Upload</button>
    </form>
</body>
</html>
